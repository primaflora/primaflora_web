import { Link } from 'react-router-dom';
import { Images } from '../../../assets';
import { useUserData } from '../../../store/tools';
import { NavLinks } from './components/NavLinks';
import { UpperHeaderBar } from './components/UpperHeaderBar';
import { useState } from 'react';
import { LogInModal } from '../Modals/LogInModal';
import { SignInModal } from '../Modals/SignInModal';
import './styles.css';

export const Header = () => {
    const { isAuth, isAdmin, user } = useUserData();
    const [isSignUpModalOpen, setIsSignUpModalOpen] = useState(false);
    const [isLoginModalOpen, setIsLoginModalOpen] = useState(false);

    const handleLogInModalClose = () => {
        setIsLoginModalOpen(false);
    };
    const handleSignInModalClose = () => {
        setIsSignUpModalOpen(false);
    };

    const handleSignUpPress = () => {
        setIsSignUpModalOpen(true);
    };

    const handleMoveToLogIn = () => {
        setIsSignUpModalOpen(false);
        setIsLoginModalOpen(true);
    };
    const handleMoveToSignUp = () => {
        setIsLoginModalOpen(false);
        setIsSignUpModalOpen(true);
    };

    return (
        <div className="header-main-container">
            <UpperHeaderBar isAuth={isAuth} />
            <div className="header-stripe main-global-padding">
                <div className='layout flex justify-between items-center' style={{height: 60}}>
                    <div className="header-logo-navigation-container">
                        <Link to={'/'}>
                        <svg width="75" height="72" viewBox="0 0 75 72" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M68.1364 36.3085C67.9664 53.7889 53.5473 68.0087 35.9824 68.0087H35.6694C27.08 67.9277 19.0345 64.515 13.0178 58.4135C6.99823 52.3141 3.73043 44.2418 3.81343 35.6905C3.98842 18.2101 18.4115 3.98832 35.9674 3.98832C36.0744 3.98832 36.1774 3.98832 36.2834 3.99032C44.8788 4.07031 52.9203 7.47801 58.9399 13.5845C64.9506 19.6839 68.2164 27.7562 68.1364 36.3085ZM38.4032 25.3344C37.5533 25.1405 36.7034 25.6644 36.4994 26.5123C36.4054 26.9195 36.4765 27.3472 36.6971 27.7021C36.9176 28.057 37.2697 28.3101 37.6763 28.4062C38.0843 28.5009 38.5132 28.4304 38.8695 28.2101C39.2258 27.9898 39.4805 27.6376 39.5782 27.2303C39.6271 27.0286 39.6354 26.8192 39.6026 26.6143C39.5699 26.4093 39.4967 26.213 39.3874 26.0366C39.278 25.8601 39.1347 25.7072 38.9658 25.5867C38.7968 25.4662 38.6056 25.3804 38.4032 25.3344ZM37.1023 20.4649C36.7109 20.3801 36.3019 20.454 35.9649 20.6703C35.6279 20.8866 35.3904 21.2277 35.3044 21.6188C35.2631 21.8115 35.2601 22.0105 35.2957 22.2043C35.3313 22.3982 35.4048 22.5831 35.512 22.7485C35.6192 22.914 35.7579 23.0566 35.9203 23.1683C36.0827 23.2801 36.2656 23.3586 36.4584 23.3996C36.8495 23.4844 37.2582 23.4108 37.5952 23.195C37.9322 22.9791 38.1699 22.6385 38.2562 22.2477C38.3393 21.8582 38.2645 21.4516 38.0482 21.1172C37.8319 20.7827 37.4917 20.5488 37.1023 20.4649ZM35.2614 18.8C35.4353 18.8383 35.615 18.8419 35.7903 18.8106C35.9656 18.7794 36.1329 18.7138 36.2828 18.6178C36.4327 18.5218 36.5622 18.3971 36.6639 18.251C36.7656 18.1048 36.8374 17.9401 36.8753 17.7661C36.9126 17.5922 36.9151 17.4127 36.8828 17.2379C36.8505 17.063 36.784 16.8962 36.6871 16.7471C36.5902 16.598 36.4649 16.4695 36.3182 16.369C36.1715 16.2684 36.0064 16.1978 35.8324 16.1613C35.6571 16.1184 35.4751 16.1112 35.2969 16.1399C35.1188 16.1686 34.9482 16.2327 34.7953 16.3284C34.6423 16.4241 34.5101 16.5494 34.4064 16.6971C34.3027 16.8447 34.2296 17.0116 34.1914 17.188C34.1533 17.3643 34.1509 17.5465 34.1843 17.7238C34.2177 17.9011 34.2863 18.0699 34.3861 18.2203C34.4858 18.3706 34.6146 18.4995 34.765 18.5992C34.9153 18.699 35.0841 18.7676 35.2614 18.801V18.8ZM33.7565 23.9096C33.3023 23.8028 32.8243 23.8803 32.4271 24.125C32.0298 24.3697 31.7456 24.7618 31.6367 25.2155C31.5314 25.6702 31.6107 26.1481 31.8572 26.5445C32.1036 26.9409 32.4972 27.2235 32.9516 27.3303C33.4055 27.4375 33.8833 27.3602 34.2802 27.1153C34.6772 26.8705 34.9606 26.4781 35.0685 26.0244C35.1224 25.7993 35.1312 25.5657 35.0944 25.3372C35.0575 25.1086 34.9757 24.8896 34.8537 24.6929C34.7317 24.4962 34.572 24.3256 34.3836 24.1909C34.1953 24.0563 33.9822 23.9613 33.7565 23.9096ZM31.9527 22.2017C32.3437 22.2843 32.7515 22.209 33.0872 21.992C33.4229 21.7751 33.6592 21.4343 33.7445 21.0438C33.786 20.851 33.789 20.6518 33.7532 20.4578C33.7174 20.2638 33.6437 20.0788 33.5362 19.9134C33.4286 19.748 33.2895 19.6054 33.1267 19.494C32.9639 19.3825 32.7807 19.3044 32.5876 19.264C32.1977 19.18 31.7905 19.2537 31.4548 19.469C31.1191 19.6842 30.8821 20.0236 30.7957 20.4129C30.6227 21.2228 31.1397 22.0207 31.9527 22.2017ZM31.8127 31.6039C32.5506 31.7649 33.2706 31.3039 33.4326 30.571C33.5061 30.2198 33.4377 29.8538 33.2423 29.5529C33.0469 29.2521 32.7404 29.0407 32.3896 28.9651C32.2156 28.9267 32.0357 28.923 31.8603 28.9542C31.6849 28.9853 31.5173 29.0508 31.3672 29.1469C31.2171 29.2429 31.0874 29.3676 30.9856 29.5138C30.8837 29.6601 30.8117 29.8249 30.7737 29.999C30.735 30.1726 30.7312 30.3522 30.7625 30.5273C30.7938 30.7024 30.8597 30.8695 30.9562 31.0189C31.0526 31.1684 31.1779 31.2971 31.3246 31.3977C31.4713 31.4983 31.6365 31.5687 31.8107 31.6049L31.8127 31.6039ZM27.2629 42.191C26.861 37.1424 24.2501 33.2268 20.6804 29.988C17.8305 27.4083 14.7807 25.4744 11.6429 24.1166C11.347 23.9876 10.973 23.7106 10.81 24.0396C10.675 24.3195 10.967 24.6605 11.128 24.9635C13.2768 28.9431 14.0258 32.8098 13.5068 36.5955C13.2175 38.6791 13.2154 40.7927 13.5008 42.8769C14.3078 48.6164 18.4205 52.1841 22.2463 53.024C22.8712 53.16 23.0322 52.74 23.1652 52.1901C24.0321 48.6964 23.4982 44.8597 22.1623 40.8111C21.5453 38.9313 20.6464 37.1424 19.8874 35.2886C24.1471 40.4131 24.6811 46.0346 25.0231 51.8711C25.959 51.1612 26.043 49.9413 26.381 48.9854C27.105 46.9655 27.4639 44.7217 27.2629 42.191ZM28.5699 25.9664C29.4168 26.1724 30.2698 25.6434 30.4617 24.8005C30.5099 24.599 30.5178 24.3899 30.4849 24.1854C30.4521 23.9808 30.3792 23.7848 30.2704 23.6084C30.1616 23.4321 30.0191 23.279 29.851 23.1579C29.6829 23.0368 29.4925 22.95 29.2908 22.9027C28.8827 22.806 28.4528 22.8753 28.0958 23.0954C27.7388 23.3156 27.4838 23.6685 27.3869 24.0766C27.3396 24.2784 27.3327 24.4875 27.3666 24.692C27.4006 24.8965 27.4747 25.0922 27.5846 25.2679C27.6946 25.4436 27.8383 25.5958 28.0074 25.7157C28.1765 25.8356 28.3677 25.9208 28.5699 25.9664ZM65.6835 31.7169C65.7145 31.1969 65.0576 31.2339 64.6126 31.1509C59.8049 30.297 54.7092 30.187 49.4115 31.0009C42.766 32.0269 36.8293 34.6036 32.8256 40.2341C30.8127 43.0629 29.6868 45.9806 29.1728 48.9284C28.9288 50.3202 28.1789 51.8201 28.8328 53.389C33.3226 46.7726 37.8893 40.5761 46.6887 37.8663C44.4689 39.4582 42.122 40.8641 40.0491 42.5939C35.5914 46.3186 32.2566 50.4212 30.8957 55.2158C30.6857 55.9658 30.5737 56.5887 31.4477 56.9237C36.7373 58.9215 44.2669 57.9366 49.2566 51.7991C51.1834 49.4193 52.5763 46.9455 53.6273 44.3898C55.6262 39.5302 59.2449 35.5616 64.6436 32.5568C65.0576 32.3238 65.6575 32.1488 65.6835 31.7169ZM70.9472 36.3325C70.7672 55.6558 54.9542 71.1794 35.6394 70.9984C16.3176 70.8085 0.818615 54.9908 1.0016 35.6635C1.18859 16.3392 16.9986 0.8196 36.3184 1.00158C55.6292 1.18957 71.1372 17.0052 70.9472 36.3325ZM69.2213 36.3185C69.3113 27.4813 65.9335 19.135 59.7159 12.8205C53.4923 6.5121 45.1778 2.99141 36.2924 2.90642C27.3689 2.82142 18.9285 6.22612 12.5819 12.4806C6.31527 18.657 2.81449 26.8993 2.72549 35.6815C2.6475 44.5208 6.02229 52.863 12.2399 59.1755C18.4595 65.4789 26.778 69.0056 35.6604 69.0916H35.9824C44.7988 69.0916 53.1013 65.6979 59.3679 59.5164C65.6405 53.342 69.1443 45.0977 69.2213 36.3185ZM72.6881 3.37138V3.36738C73.1033 3.77854 73.433 4.26785 73.6582 4.80707C73.8833 5.34629 73.9995 5.92476 74 6.5091C73.999 7.09292 73.8826 7.67079 73.6574 8.20945C73.4323 8.74812 73.1029 9.23695 72.6881 9.64782C71.8517 10.4811 70.7189 10.9486 69.5383 10.9477H69.5323C68.3497 10.9479 67.215 10.4806 66.3755 9.64782C65.5422 8.81564 65.0732 7.68677 65.0716 6.5091C65.0716 5.27921 65.5745 4.17431 66.3845 3.36738C67.2208 2.53198 68.3548 2.06299 69.5369 2.06355C70.719 2.06412 71.8525 2.53519 72.6881 3.37138ZM69.5323 2.54045C68.4765 2.54007 67.4635 2.95741 66.7145 3.70135C66.3448 4.06916 66.0517 4.50659 65.8521 4.98834C65.6525 5.4701 65.5503 5.98663 65.5515 6.5081C65.5515 7.598 65.9935 8.59192 66.7145 9.30985C67.4444 10.0298 68.4343 10.4788 69.5323 10.4788H69.5373C70.5935 10.4771 71.6059 10.0564 72.3521 9.30885C72.7222 8.94238 73.0163 8.50638 73.2174 8.02591C73.4185 7.54544 73.5228 7.02996 73.524 6.5091C73.5193 5.45394 73.0965 4.44368 72.3483 3.69962C71.6001 2.95557 70.5875 2.53838 69.5323 2.53945V2.54045ZM70.7012 8.7479L69.1673 6.63809C69.0493 6.64309 68.9543 6.64309 68.8823 6.64309H68.7933C68.7623 6.64309 68.7243 6.64309 68.6873 6.63709V7.95297C68.6873 8.23595 68.7223 8.40993 68.7853 8.48093C68.8653 8.58092 68.9953 8.62991 69.1673 8.62991H69.3473V8.7479H67.4014V8.62991H67.5654C67.7574 8.62991 67.8924 8.56392 67.9794 8.44093C68.0304 8.37594 68.0534 8.20795 68.0534 7.95297V5.02923C68.0534 4.74226 68.0194 4.57127 67.9564 4.50228C67.8664 4.39929 67.7384 4.35129 67.5664 4.35129H67.4014V4.2283H69.0503C69.5333 4.2283 69.8893 4.2623 70.1182 4.33429C70.3482 4.40428 70.5412 4.53427 70.7022 4.72226C70.8622 4.90824 70.9462 5.13222 70.9462 5.3972C70.9462 5.67117 70.8482 5.91215 70.6662 6.11714C70.4892 6.32012 70.2132 6.4671 69.8233 6.5491L70.7622 7.84898C70.9682 8.14496 71.1582 8.34694 71.3072 8.44093C71.4712 8.53892 71.6641 8.60092 71.9191 8.62991V8.7479H70.7012ZM68.6873 6.42911H68.7973C68.8333 6.42911 68.8593 6.43211 68.8773 6.43211C69.3103 6.43211 69.6353 6.33712 69.8593 6.15413C69.9642 6.06809 70.0484 5.95947 70.1055 5.83638C70.1627 5.71329 70.1913 5.57889 70.1892 5.44319C70.1927 5.3143 70.1704 5.18602 70.1237 5.06584C70.077 4.94565 70.0068 4.83599 69.9173 4.74326C69.8241 4.65618 69.7147 4.58838 69.5952 4.54376C69.4758 4.49914 69.3487 4.47859 69.2213 4.48328C69.0923 4.48328 68.9053 4.50328 68.6873 4.55127V6.42911Z" fill="#72BF44"/>
    </svg>

                            {/* <img src={Images.PrimafloraLogoSvg} alt="Primaflora" /> */}
                        </Link>
                        <div className="header-nav-links">
                            <NavLinks isAdmin={isAdmin} isAuth={isAuth} />
                        </div>
                        <div className="header-nav-links-mob">
                            <NavLinks isMob isAuth={isAuth} />
                        </div>
                    </div>

                    <div className="header-input-container">
                        <input className="header-input" placeholder="Пошук" />
                        <button className="header-input-button">
                            <img src={Images.SearchIcon} alt="Search" />
                        </button>
                    </div>
                </div>
            </div>

            <SignInModal
                isOpen={isSignUpModalOpen}
                onClose={handleSignInModalClose}
                onMoveToLogIn={handleMoveToLogIn}
            />
            <LogInModal
                isOpen={isLoginModalOpen}
                onClose={handleLogInModalClose}
                onMoveToSignUp={handleMoveToSignUp}
            />

            <div
                className={`header-bottom-stipe-mob ${
                    isAuth ? 'bottom-stripe-guest' : 'bottom-stripe-authed'
                }`}
                onClick={isAuth ? () => {} : handleSignUpPress}>
                {isAuth ? (
                    <h1>ВАШ № {user?.login} / Ваша знижка 10%</h1>
                ) : (
                    <h1 className="header-bottom-stripe-mob-text">
                        ОТРИМАТИ ЗНИЖКУ 10%
                    </h1>
                )}
            </div>
        </div>
    );
};
